# ?? v1.7.4 - Item Weight Property Added

## Что Добавлено

**Теперь каждый предмет может иметь вес!**

```cpp
UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Item|Stacking")
float ItemWeight = 0.0f;
```

---

## ?? Где Находится

**ItemDataAsset ? Category: "Item|Stacking"**

```
ItemDataAsset (DA_HealthPotion):
??? Item | Basic
?   ??? Item Name
?   ??? Item Description
?   ??? ...
?
??? Item | Stacking  <-- HERE!
    ??? Max Stack Size = 10
    ??? Is Stackable = True
    ??? Item Weight = 0.5  <-- NEW!
```

---

## ?? Где Использовать

### Пример Настройки:

**Light Items (Легкие предметы):**
```
DA_Coin:
??? Item Weight = 0.01
??? Max Stack Size = 999

DA_Arrow:
??? Item Weight = 0.05
??? Max Stack Size = 50
```

**Medium Items (Средние предметы):**
```
DA_HealthPotion:
??? Item Weight = 0.5
??? Max Stack Size = 10

DA_Sword:
??? Item Weight = 2.0
??? Max Stack Size = 1
```

**Heavy Items (Тяжелые предметы):**
```
DA_Armor:
??? Item Weight = 15.0
??? Max Stack Size = 1

DA_Chest:
??? Item Weight = 25.0
??? Max Stack Size = 1
```

---

## ?? Зачем Это Нужно

### 1. Weight Limit System

Можно реализовать систему ограничения по весу:

```cpp
// Будущая реализация:
float CurrentWeight = InventoryComponent->GetTotalWeight();
float MaxWeight = 100.0f;

if (CurrentWeight + ItemWeight > MaxWeight)
{
    // Inventory too heavy!
    ShowMessage("You can't carry any more!");
}
```

### 2. Encumbrance System

Влияние веса на скорость:

```cpp
float WeightPercentage = CurrentWeight / MaxWeight;

if (WeightPercentage > 0.75f)
{
    // Slow down!
    CharacterMovement->MaxWalkSpeed *= 0.7f;
}
```

### 3. Stamina Drain

Вес влияет на выносливость:

```cpp
float StaminaDrain = BaseStaminaDrain * (1.0f + WeightPercentage);
```

---

## ?? Current Status

### ? Added to ItemDataAsset:
```cpp
UPROPERTY(EditAnywhere, BlueprintReadOnly, Category = "Item|Stacking", meta = (ClampMin = "0"))
float ItemWeight = 0.0f;
```

### ? Not Yet Implemented in InventoryComponent:

Свойство добавлено, НО:
- ? InventoryComponent пока **НЕ считает** total weight
- ? InventoryComponent пока **НЕ проверяет** weight limit
- ? Нет `GetTotalWeight()` функции

**Это foundation для будущей реализации!**

---

## ?? Как Будет Работать (Future)

### Step 1: Add to InventoryComponent

```cpp
// InventoryComponent.h
UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "Inventory|Weight")
float MaxWeight = 100.0f;

UFUNCTION(BlueprintPure, Category = "Inventory|Weight")
float GetTotalWeight() const;

UFUNCTION(BlueprintPure, Category = "Inventory|Weight")
float GetRemainingWeight() const;

UFUNCTION(BlueprintPure, Category = "Inventory|Weight")
bool CanAddWeight(float AdditionalWeight) const;
```

### Step 2: Implement Weight Calculation

```cpp
float UInventoryComponent::GetTotalWeight() const
{
    float TotalWeight = 0.0f;
  
    for (const UInventoryItem* Item : InventoryItems)
    {
   if (Item && Item->ItemData)
        {
     TotalWeight += Item->ItemData->ItemWeight * Item->GetQuantity();
        }
    }
    
    return TotalWeight;
}

bool UInventoryComponent::CanAddWeight(float AdditionalWeight) const
{
    return (GetTotalWeight() + AdditionalWeight) <= MaxWeight;
}
```

### Step 3: Check Weight in AddItem

```cpp
bool UInventoryComponent::CanAddItem(UItemDataAsset* ItemData, int32 Quantity) const
{
    // ... existing slot checks ...
    
    // NEW: Check weight
    float ItemTotalWeight = ItemData->ItemWeight * Quantity;
    if (!CanAddWeight(ItemTotalWeight))
    {
        // Too heavy!
        return false;
    }
    
    return true;
}
```

---

## ?? Migration Guide

### Если У Вас Есть Существующие Items:

**Ничего не нужно делать!**

- По умолчанию `ItemWeight = 0.0`
- Всё работает как раньше
- Вес игнорируется до реализации weight system

**Если Хотите Настроить Вес Заранее:**

1. Open ItemDataAsset
2. Scroll to "Item|Stacking"
3. Set "Item Weight" = желаемый вес
4. Save

---

## ?? Examples

### Realistic Weights (kg):

```
Consumables:
??? Potion (250ml) = 0.3 kg
??? Apple = 0.15 kg
??? Bread = 0.4 kg

Weapons:
??? Dagger = 0.8 kg
??? Sword = 2.5 kg
??? Greatsword = 5.0 kg
??? Bow = 1.2 kg

Armor:
??? Leather Armor = 8.0 kg
??? Chainmail = 15.0 kg
??? Plate Armor = 25.0 kg

Misc:
??? Coin = 0.01 kg
??? Arrow = 0.05 kg
??? Book = 0.5 kg
??? Gemstone = 0.02 kg
```

### Fantasy Weights (abstract units):

```
Light: 0.1 - 1.0
Medium: 1.0 - 5.0
Heavy: 5.0 - 20.0
Very Heavy: 20.0+
```

---

## ? Benefits

### 1. **Future-Proof**
- Foundation готов
- Легко добавить weight system позже
- Данные уже заполнены

### 2. **Realistic Gameplay**
- Нельзя унести всё
- Выбор: брать деньги или лут?
- Стратегическое управление inventory

### 3. **Balancing**
- Powerful items = heavy
- Стимул не hoarding
- Trade-offs: damage vs mobility

---

## ?? Future Implementation

**Когда захотите добавить weight system:**

1. Implement `GetTotalWeight()` in InventoryComponent
2. Add `MaxWeight` property
3. Check weight in `CanAddItem()`
4. Show weight UI (e.g., "75.5 / 100 kg")
5. Optional: Encumbrance system

**Уже готово:**
- ? ItemWeight property exists
- ? Can set per-item weights
- ? Saved in ItemDataAssets
- ? Ready to use!

---

## ?? Data Asset Screenshot

```
[ItemDataAsset Editor]

Category: Item | Stacking
??????????????????????????????????????
? Max Stack Size:  [     10     ]   ?
?      ?
? Is Stackable:    [?]  ?
?      ?
? Item Weight:     [   0.5      ] ? NEW!
?    ?
??????????????????????????????????????

Hint: Weight of a single item unit
      Used for inventory weight limit
```

---

## ? Summary

**v1.7.4 adds ItemWeight property!**

**Current State:**
- ? Property added to ItemDataAsset
- ? Editable in editor
- ? Saved with assets
- ? Not yet used by InventoryComponent

**Next Steps:**
- Fill in weights for your items
- Wait for weight system implementation
- Or implement yourself using GetTotalWeight() pattern above!

**It's ready when you are!** ??

---

**Version:** 1.7.4  
**Status:** ? Foundation Ready  
**Breaking Changes:** None  
**Migration Required:** None  

**Weight support = Available!** ??
