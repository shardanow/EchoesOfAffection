# ?? Quest Conditions — Быстрая памятка

## ? РАБОТАЮЩИЕ СОБЫТИЯ (прямо сейчас)

### ?? Inventory (Инвентарь)

```
???????????????????????????????????????????????????????????
? Подобрать предмет     ?
???????????????????????????????????????????????????????????
? EventTag: GameEvent.Inventory.ItemAcquired          ?
? Фильтры:  ItemId (какой предмет)                  ?
? Пример:   Collect 5 apples       ?
???????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????
? Использовать предмет  ?
???????????????????????????????????????????????????????????
? EventTag: GameEvent.Inventory.ItemUsed        ?
? Фильтры:  ItemId (какой предмет)       ?
? Пример:   Eat 2 apples           ?
???????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????
? Подарить предмет NPC          ?
???????????????????????????????????????????????????????????
? EventTag: GameEvent.Inventory.ItemGifted      ?
? Фильтры:  ItemId (что), NpcId (кому)              ?
? Пример:   Give flowers to Alice       ?
???????????????????????????????????????????????????????????
```

---

### ?? Dialogue (Диалоги)

```
???????????????????????????????????????????????????????????
? Поговорить с NPC      ?
???????????????????????????????????????????????????????????
? EventTag: GameEvent.Dialogue.Started  ?
? Фильтры:  NpcId (с кем говорить) ?
? Пример:   Talk to Lianne?
? Статус:   ? РАБОТАЕТ! (после rebuild)          ?
???????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????
? Выбрать вариант в диалоге     ?
???????????????????????????????????????????????????????????
? EventTag: GameEvent.Dialogue.ChoiceSelected     ?
? Фильтры:  DialogNodeId, RequiredTags     ?
? Пример: Agree to help Alice    ?
? Статус:   ?? Требует интеграции        ?
???????????????????????????????????????????????????????????
```

---

### ?? Quest (Квесты)

```
???????????????????????????????????????????????????????????
? Начать другой квест    ?
???????????????????????????????????????????????????????????
? EventTag: GameEvent.Quest.Started     ?
? Фильтры:  RequiredTags (тип квеста)       ?
? Пример:   Start 3 side quests           ?
???????????????????????????????????????????????????????????

???????????????????????????????????????????????????????????
? Завершить другой квест       ?
???????????????????????????????????????????????????????????
? EventTag: GameEvent.Quest.Completed         ?
? Фильтры:  NpcId (ID квеста)     ?
? Пример:   Complete 'Collect Apples' quest          ?
???????????????????????????????????????????????????????????
```

---

## ?? ТРЕБУЮТ ИНТЕГРАЦИИ

### ??? Location (Локации)

```
? EventTag: GameEvent.Location.EnterArea
   Статус:   Нужен триггер-компонент

? EventTag: GameEvent.Location.LeaveArea
   Статус:   Нужен триггер-компонент
```

### ? Time (Время)

```
?? EventTag: GameEvent.Time.Reached
   Статус:   Система времени есть, нужна эмиссия событий

?? EventTag: GameEvent.Time.DayChanged
   Статус:   Система времени есть, нужна эмиссия событий
```

### ?? Affection (Отношения)

```
? EventTag: GameEvent.Affection.Changed
   Статус:   Нужна система отношений
```

### ?? Needs (Потребности)

```
? EventTag: GameEvent.Need.Changed
   Статус:   Система есть! Готово к использованию
```

---

## ?? Шаблоны для копирования

### Собрать предметы

```
Objective: "Collect [count] [item_name]"
  Condition:
    EventTag: GameEvent.Inventory.ItemAcquired
    ItemId: [item_id]
    Count: [count]
```

### Поговорить с NPC

```
Objective: "Talk to [npc_name]"
  Condition:
    EventTag: GameEvent.Dialogue.Started
    NpcId: [npc_id]
    Count: 1
```

### Подарить предмет

```
Objective: "Give [item_name] to [npc_name]"
  Condition:
    EventTag: GameEvent.Inventory.ItemGifted
    ItemId: [item_id]
  NpcId: [npc_id]
    Count: 1
```

### Использовать предметы

```
Objective: "Use [count] [item_name]"
  Condition:
    EventTag: GameEvent.Inventory.ItemUsed
    ItemId: [item_id]
  Count: [count]
```

---

## ? Быстрая проверка

### ? Условие настроено правильно если:

- [x] `EventTag` НЕ пустой
- [x] `EventTag` начинается с `GameEvent.*`
- [x] Фильтры (`ItemId`, `NpcId`) заполнены корректно
- [x] `Count` > 0

### ? Признаки ошибки:

- [ ] `EventTag` = None
- [ ] `EventTag` = Quest.Event.* (старые теги!)
- [ ] ItemId указан для NPC-события
- [ ] NpcId указан для item-события

---

## ?? Статус по типам событий

| Категория | Готовность | Примечание |
|-----------|-----------|------------|
| Inventory | ? 100% | Все события работают |
| Dialogue | ? 100% | Dialogue.Started работает! (после rebuild) |
| Quest | ? 100% | Все события работают |
| Location | ? 0% | Нужен LocationTriggerComponent |
| Time | ?? 50% | Система есть, нужно подключить |
| Weather | ? 0% | Система не реализована |
| Affection | ? 0% | Система не реализована |
| Needs | ? 100% | Система готова! |

---

## ?? Следующие шаги

### Для интеграции Location Events:

1. Создать `LocationTriggerComponent`
2. Подписаться на `OnActorBeginOverlap` / `OnActorEndOverlap`
3. Эмитировать `GameEvent.Location.EnterArea` / `LeaveArea`

### Для интеграции Time Events:

1. В `TimeOfDaySubsystem` подписаться на изменение часа
2. Эмитировать `GameEvent.Time.Reached` когда время совпадает
3. Эмитировать `GameEvent.Time.DayChanged` при смене дня

### Для интеграции Affection:

1. Создать `AffectionSubsystem`
2. Отслеживать изменения привязанности
3. Эмитировать `GameEvent.Affection.Changed`

---

**КРАТКАЯ ПАМЯТКА ГОТОВА!** ???
