# Обновление до версии 1.2.0 - Инструкция

## ?? Критическое обновление

Версия 1.2.0 исправляет **критический баг**, вызывавший crash редактора при работе со Schedule Data Assets.

---

## Что исправлено?

### Проблема
При добавлении второго или последующих элементов в Schedule Data Asset редактор падал с ошибкой:
```
Access violation reading location 0x0000000000000068
```

### Решение
Исправлена функция сортировки массива Entries, теперь она корректно обрабатывает временные nullptr.

---

## Нужно ли обновляться?

### ? ДА, если:
- Вы используете Schedule Data Assets
- Вы планируете добавлять entries в расписания
- У вас уже были crashes при работе с расписаниями

### ? МОЖНО НЕ СПЕШИТЬ, если:
- Вы не используете Schedule System
- Вы используете старые версии расписаний без изменений
- У вас нет проблем с текущей версией

---

## Как обновиться?

### Шаг 1: Сохраните работу
```
1. Сделайте commit текущего состояния проекта
2. Создайте backup важных Schedule Data Assets
```

### Шаг 2: Обновите код
```
1. Замените файл ScheduleData.cpp на новую версию
2. Или примените patch из репозитория
```

### Шаг 3: Перекомпилируйте
```
1. Закройте Unreal Editor
2. Перекомпилируйте C++ проект
3. Запустите редактор
```

### Шаг 4: Проверьте
```
1. Откройте существующий Schedule Data Asset
2. Попробуйте добавить новый entry
3. Убедитесь, что нет crashes
```

---

## Что изменилось?

### API Changes
? **НЕТ** изменений в API  
? **НЕТ** breaking changes  
? Полная обратная совместимость

### Data Format
? **НЕТ** изменений в формате данных  
? Существующие assets работают без изменений

### Behavior
? Исправлено: crash при добавлении entries  
? Исправлено: crash при автосортировке  
? Улучшено: обработка null-элементов

---

## Проверка после обновления

### Тест 1: Открытие существующих assets
```
1. Откройте Schedule Data Asset, созданный до обновления
2. Проверьте, что все entries отображаются
3. Проверьте, что приоритеты корректны
```
**Ожидаемый результат:** ? Все работает как раньше

### Тест 2: Добавление нового entry
```
1. Откройте Schedule Data Asset
2. Нажмите "+" в массиве Entries
3. Заполните новый entry
```
**Ожидаемый результат:** ? Нет crash, entry добавлен

### Тест 3: Автосортировка
```
1. Установите bAutoSortByPriority = true
2. Добавьте entries с разными приоритетами
3. Проверьте порядок в массиве
```
**Ожидаемый результат:** ? Entries отсортированы по убыванию Priority

---

## Откат (если что-то пошло не так)

### Если возникли проблемы:

1. **Восстановите код:**
   ```
   git checkout <предыдущая-версия>
   ```

2. **Восстановите assets из backup**

3. **Перекомпилируйте проект**

4. **Сообщите о проблеме:**
   - Создайте issue в GitHub
   - Опишите симптомы
   - Приложите логи

---

## FAQ

### Q: Нужно ли пересоздавать существующие Schedule Data Assets?
**A:** Нет, все существующие assets работают без изменений.

### Q: Изменится ли поведение моих расписаний?
**A:** Нет, поведение не изменилось. Исправлена только стабильность редактора.

### Q: Можно ли обновиться посреди разработки?
**A:** Да, обновление безопасно и не ломает совместимость.

### Q: Что делать, если после обновления все равно crashes?
**A:** 
1. Проверьте, что используется правильная версия файла
2. Перекомпилируйте проект с нуля (Clean Solution ? Build)
3. Создайте issue с подробным описанием

### Q: Влияет ли это на runtime performance?
**A:** Нет, изменения только в editor code (PostEditChangeProperty).

---

## Поддержка

### Документация
- ?? Полный отчет: `BUGFIX_Report_v1.2.md`
- ?? Технические детали: `BUGFIX_Array_Sort_Crash.md`
- ?? Краткая справка: `BUGFIX_Array_Sort_QuickRef.md`

### Контакты
- **GitHub:** https://github.com/shardanow/EchoesOfAffection/issues
- **Repository:** https://github.com/shardanow/EchoesOfAffection

---

## Благодарности

Спасибо за использование Actor Schedule System!

Если у вас есть вопросы или проблемы, не стесняйтесь создавать issues в GitHub.

---

**Version:** 1.2.0  
**Date:** 27 января 2025  
**Status:** ? Stable Release  
**Priority:** P0 (Critical Bug Fix)
