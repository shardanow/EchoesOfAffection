# ?? Визуализация MusicZoneVolume в Unreal Editor

## ? Компиляция успешна!

Система визуализации музыкальных зон успешно добавлена и скомпилирована.

---

## ?? Как увидеть зоны в редакторе

### Способ 1: Стандартная визуализация Volume (всегда работает)

1. **Откройте уровень** в Unreal Editor
2. **Разместите** `BP_MusicZone` на уровне
3. **В левом верхнем углу вьюпорта** найдите кнопку **"Show"**
4. Раскройте **"Volumes"**
5. ? **Включите чекбокс** `Volumes`

**Результат:** Вы увидите полупрозрачный box вокруг всех Volume актеров, включая MusicZoneVolume.

---

### Способ 2: Debug визуализация (с подробной информацией)

#### ?? В редакторе (Editor Mode)

1. **Откройте уровень**
2. **Разместите** `BP_MusicZone`
3. **НЕ нажимайте Play** (остаться в Editor Mode)
4. **Выберите** MusicZoneVolume в Outliner

**Автоматически появятся:**
- ? Цветной box вокруг зоны
- ? Текстовая информация над зоной:
  - Имя зоны
  - Приоритет
  - Назначенная музыка
- ? Сфера в центре (размер зависит от приоритета)

**Цветовая кодировка:**
- ?? **Голубой** - зона активна, нет музыки
- ?? **Зеленый** - зона активна с музыкой
- ?? **Красный** - зона неактивна (bIsActive = false)

---

### Способ 3: В режиме игры (Play Mode)

1. **Нажмите Play** в редакторе
2. **Включите визуализацию** через консоль (~):
   ```
   show COLLISION
   ```
3. Зоны будут видны как collision volumes

---

## ?? Настройка визуализации

### Изменение цвета зоны

В деталях Volume можно настроить:

| Параметр | Описание | По умолчанию |
|----------|----------|--------------|
| **BrushColor** | Цвет зоны | Голубой (100, 200, 255, 128) |
| **bColored** | Включить окраску | True |

**Совет:** Цвет автоматически меняется в зависимости от приоритета после изменения в редакторе!

### Изменение размера зоны

1. **Выберите** MusicZoneVolume
2. **Перейдите** в режим редактирования Brush (кнопка **Brush Editing Mode**)
3. **Перетаскивайте** вершины box'а для изменения размера

Или используйте Scale tool (R):
1. Выберите зону
2. Нажмите **R** (Scale)
3. Масштабируйте зону

---

## ?? Полезные команды консоли

Откройте консоль (~) и введите:

```cpp
// Показать все collision volumes
show COLLISION

// Показать все volumes (включая музыкальные)
show VOLUMES

// Показать bounds всех акторов
show BOUNDS

// Отладка музыкальной системы
Music.Debug

// Остановить музыку
Music.Stop
```

---

## ?? Что вы увидите

### В Editor Mode (без Play)

```
????????????????????????????????????????
?   BP_MusicZone_Town             ?
?   Priority: 10      ?
?   Town_Theme_Music       ?
????????????????????????????????????????
         ?
    [Голубой Box]
         ?
     [Сфера в центре]
```

### В Play Mode

Когда игрок входит в зону:
- Box становится **зеленым**
- Текст обновляется: `[PLAYER INSIDE]`
- В логах появляется: `Player entered MusicZone 'BP_MusicZone_Town' - Priority: 10`

---

## ?? Примеры использования

### Пример 1: Город (низкий приоритет)

```
Name: BP_MusicZone_Town
Priority: 10
Music: Town_Peaceful_Theme
Color: Светло-голубой
Size: Большой box (весь город)
```

### Пример 2: Босс-арена (высокий приоритет)

```
Name: BP_MusicZone_Boss
Priority: 100
Music: Boss_Epic_Battle
Color: Фиолетовый (высокий приоритет)
Size: Средний box (арена)
Сфера: Большая (Priority * 1.5)
```

### Пример 3: Секретная комната

```
Name: BP_MusicZone_Secret
Priority: 50
Music: Mystery_Theme
bIsActive: True
bPlayerOnly: True
bShowDebugInfo: True (показывает сообщения на экране)
```

---

## ?? Troubleshooting

### Не вижу зоны в редакторе

**Решение 1:** Включите отображение Volumes
- `Show` ? `Volumes` ? ? Check

**Решение 2:** Проверьте, что зона не невидима
- Выберите зону
- Details ? Rendering ? Actor Hidden in Game = False

**Решение 3:** Перезапустите редактор
- File ? Restart Editor

### Debug информация не появляется

**Причина:** Debug визуализация работает только в **Editor Mode**, не в **Play Mode**.

**Решение:**
- Не нажимайте Play
- Просто выберите Volume в Outliner
- Или включите `show COLLISION` в Play Mode

### Цвет зоны не меняется

**Решение:**
- Измените **Priority** в деталях
- Цвет обновится автоматически через `PostEditChangeProperty`

### Зона слишком маленькая/большая

**Решение 1:** Используйте Scale
- Выберите зону
- Нажмите R (Scale tool)
- Масштабируйте

**Решение 2:** Brush Editing
- Brush Editing Mode
- Перетаскивайте вершины вручную

---

## ?? Скриншоты (как должно выглядеть)

### В редакторе:

```
           "BP_MusicZone_Town"
   "Priority: 10"
        "Town_Theme"
               ?
    ???????????????????????
    ?     ?  ? Голубой полупрозрачный box
 ?        ?          ?  ? Сфера в центре (размер = Priority)
  ? ?
    ???????????????????????
```

### После входа игрока:

```
     "BP_MusicZone_Town"
           "Priority: 10"
       "Town_Theme"
           "[PLAYER INSIDE]"  ? НОВОЕ
      ?
    ???????????????????????
    ?          ?  ? ЗЕЛЕНЫЙ box
    ?        ?  ?  ? Сфера (зеленая)
    ?                 ?
    ???????????????????????
```

---

## ?? Цветовая шкала приоритетов

Цвет зоны автоматически меняется в зависимости от приоритета:

| Priority | Цвет | Описание |
|----------|------|----------|
| 0-20 | ?? Светло-голубой | Фоновая музыка |
| 21-40 | ?? Голубой | Локации |
| 41-60 | ?? Сине-фиолетовый | Важные зоны |
| 61-80 | ?? Фиолетовый | События |
| 81-100 | ?? Темно-фиолетовый | Боссы |

---

## ? Дополнительные фичи

### Сфера приоритета

Размер сферы в центре зоны = `30 + (Priority * 1.5)`

**Примеры:**
- Priority 10 ? Сфера радиусом 45 units
- Priority 50 ? Сфера радиусом 105 units
- Priority 100 ? Сфера радиусом 180 units

### Текстовая информация

Автоматически отображается:
- Имя зоны (GetName())
- Приоритет
- Назначенная музыка (или "No Music")
- Статус игрока (если внутри)

### Динамическое обновление

Все визуализации обновляются **каждый фрейм** в редакторе, поэтому:
- ? Изменения приоритета видны мгновенно
- ? Изменения музыки обновляют текст
- ? Вход игрока меняет цвет на зеленый

---

## ?? Быстрый тест

1. **Создайте** 3 зоны разного приоритета:
   - `BP_MusicZone_Low` (Priority: 10) - Голубой
   - `BP_MusicZone_Medium` (Priority: 50) - Фиолетовый
   - `BP_MusicZone_High` (Priority: 100) - Темно-фиолетовый

2. **Разместите** их на уровне перекрывающимися

3. **Включите** `Show ? Volumes`

4. **Наблюдайте** цветовую иерархию приоритетов!

---

**Готово!** Теперь вы можете видеть и редактировать музыкальные зоны прямо в редакторе! ???

**Дата создания:** 23 октября 2025  
**Версия:** 1.0
